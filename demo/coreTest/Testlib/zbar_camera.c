#include "iot_os.h"
#include "iot_debug.h"
#include "iot_camera.h"
#include "zbar.h"

//默认sensor是gc0310, 打开AM_CAM_BF20A6宏使用BF20A6

#ifdef AM_CAM_BF20A6 
#define CAM_ID_REG  0xfc
#define CAM_ID_VALUE 0x20
#define CAM_SPI_SPEED OPENAT_SPI_SPEED_SDR 
#define CAM_SPI_SLAVE_ADDR 0X6E
#else
#define CAM_ID_REG 0xf1
#define CAM_ID_VALUE 0x10
#define CAM_SPI_SPEED OPENAT_SPI_SPEED_DEFAULT 
#define CAM_SPI_SLAVE_ADDR 0x21
#endif


#ifdef AM_CAM_BF20A6 
static AMOPENAT_CAMERA_REG cameraInitReg[]  =
{
	{0xf2,0x01},
	{0xe0,0x00},
	{0x12,0xC0},//ZX:10
	{0x3a,0x02},
	{0xe1,0x92},
	{0xe3,0x12},
	{0x2a,0x98},
	{0xcd,0x17},
	{0xe2,0x09},
	{0xe4,0x92},
	{0xe5,0x22},
	{0xe6,0x24},
	{0xe7,0x54},
	{0xe8,0xf2},
	{0x4a,0x00},
	{0x00,0x03},
	{0x1f,0x02},
	{0x22,0x02},
	
	{0xa0,0x08},
	{0x01,0x20},
	{0x02,0x10},
	{0x13,0x08},
	{0x8a,0x96},
	{0x8b,0x0a},
	{0x87,0x18},
	
	
	{0x34,0x48},//lens
	{0x35,0x40},
	{0x36,0x40},
	
	{0x72,0x47},
	{0x74,0xa2},
	{0x75,0xa9},
	{0x78,0x12},
	{0x79,0xa0},
	{0x7a,0x94},
	{0x7c,0x97},
	{0x40,0x30},
	{0x41,0x30},
	{0x42,0x28},
	{0x43,0x1f},
	{0x44,0x1c},
	{0x45,0x16},
	{0x46,0x13},
	{0x47,0x10},
	{0x48,0x0D},
	{0x49,0x0C},
	{0x4B,0x0A},
	{0x4C,0x0B},
	{0x4E,0x09},
	{0x4F,0x08},
	{0x50,0x08},
	
	
	{0x5f,0x29},
	{0x23,0x33},
	{0xa1,0x10},//AWB
	{0xa2,0x0d},
	{0xa3,0x30},
	{0xa4,0x06},
	{0xa5,0x22},
	{0xa6,0x56},
	{0xa7,0x18},
	{0xa8,0x1a},
	{0xa9,0x12},
	{0xaa,0x12},
	{0xab,0x16},
	{0xac,0xb3},
	{0xba,0x12},
	{0xbb,0x12},
	{0xad,0x12},
	{0xae,0x56},//56
	{0xaf,0x0a},
	{0x3b,0x30},
	{0x3c,0x12},
	{0x3d,0x22},
	{0x3e,0x3f},
	{0x3f,0x28},
	{0xb8,0xc3},
	{0xb9,0xA3},
	{0x39,0x47},//pure color threshold
	{0x26,0x13},
	{0x27,0x16},
	{0x28,0x14},
	{0x29,0x18},
	{0xee,0x0d},
	
	{0x13,0x05},
	{0x24,0x40},
	{0x81,0x20},
	{0x82,0x40},
	{0x83,0x30},
	{0x84,0x58},
	{0x85,0x30},
	{0x92,0x08},
	{0x86,0xc0},
	{0x8a,0x96},
	{0x91,0xff},
	{0x94,0x62},
	{0x9a,0x18},//outdoor threshold
	{0xf0,0x4D},
	{0x51,0x07},//color normal
	{0x52,0x1B},
	{0x53,0x7A},
	{0x54,0x61},
	{0x55,0x56},
	{0x56,0x03},
	{0x7e,0x15},
	{0x57,0x37},//A光color
	{0x58,0x1E},
	{0x59,0xAF},
	{0x5a,0xC5},
	{0x5b,0x55},
	{0x5c,0x18},
	{0x5d,0x00},
	{0x7d,0x36},
	{0x5e,0x10},
	
	{0xd6,0x88},//contrast
	{0xd5,0x25},//低光加亮度
	{0xb0,0xa4},//灰色区域降饱和度
	{0xb5,0x08},//低光降饱和度阈值
	{0xb1,0xc8},//saturation
	{0xb2,0xc8},
	{0xb3,0xd0},
	{0xb4,0xc0},
	
	{0x32,0x10},
	{0xa0,0x89},
	
	{0x0b,0x00},
	


#ifdef VGA_SUPPORT
	{0x17,0x00},
	{0x18,0xA0},
	{0x19,0x00},
	{0x1a,0x78},
#else
	{0x17,0x28},
	{0x18,0x78},
	{0x19,0x1E},
	{0x1a,0x5A},
#endif

	{0x15,0x10},
};
#else
static AMOPENAT_CAMERA_REG cameraInitReg[]  =
{
	//GC0310_OUTPUT_MODE_PACKET_DDR_2BIT
	//VGA setting	
	/////////////////////////////////////////////////
	/////////////////   system reg  /////////////////
	/////////////////////////////////////////////////
	{0xfe,0xf0},
	{0xfe,0xf0},
	{0xfe,0x00},

	{0xfc,0x16}, //4
	{0xfc,0x16}, //4 
	{0xf2,0x07}, //sync output
	{0xf3,0x83}, //ff//1f//01 data output
	{0xf5,0x07}, //sck_dely

	{0xf7,0x89}, //f8//fd   88
	{0xf8,0x01},           // 00
	{0xf9,0x4f}, //0f//01   4d
	{0xfa,0x11}, //32

	{0xfc,0xce},
	{0xfd,0x00},
	/////////////////////////////////////////////////
	/////////////////   CISCTL reg  /////////////////
	/////////////////////////////////////////////////
	{0x00,0x2f}, 
	{0x01,0x0f}, 
	{0x02,0x04},


	{0x03,0x02},
	{0x04,0x12},

	{0x09,0x00}, 
	{0x0a,0x00}, 
	{0x0b,0x00}, 
	{0x0c,0x04}, 
	{0x0d,0x01}, 
	{0x0e,0xe8}, 
	{0x0f,0x02}, 
	{0x10,0x88}, 
	{0x16,0x00},
	{0x17,0x14},
	{0x18,0x1a}, 
	{0x19,0x14}, 
	{0x1b,0x48},
	{0x1c, 0x6c},
	{0x1e,0x6b}, 
	{0x1f,0x28},			

	{0x20,0x8b}, 

	{0x21,0x49}, 
	{0x22, 0xd0}, //b0 travis 20140929
	{0x23,0x04}, 
	{0x24,0xff}, 
	{0x34,0x20}, 
	/////////////////////////////////////////////////
	////////////////////   BLK   ////////////////////
	/////////////////////////////////////////////////
	{0x26,0x23}, //[1]dark_current_en [0]offset_en
	{0x28,0xff}, //BLK_limie_value
	{0x29,0x00}, //global offset
	{0x32, 0x04},//00  travis 20140929
	{0x33,0x10}, //offset_ratio
	{0x37,0x20}, //dark_current_ratio
	{0x38,0x10}, 
	{0x47,0x80}, //a7
	{0x4e,0x66}, //select_row
	{0xa8,0x02}, //win_width_dark, same with crop_win_width
	{0xa9,0x80},
	/////////////////////////////////////////////////
	//////////////////   ISP reg  ///////////////////
	/////////////////////////////////////////////////
	{0x40,0xff}, 
	{0x41,0x21},//00//[0]curve_en
	{0x42,0xcf},  //0a//[1]awn_en
	{0x44,0x02}, 
	{0x45,0xa8}, 
	{0x46,0x02}, //03//sync
	{0x4a,0x11}, 
	{0x4b,0x01}, 
	{0x4c,0x20},//00[5]pretect exp
	{0x4d,0x05},//update gain mode
	{0x4f,0x01}, 
	{0x50,0x01},//crop enable
	{0x55,0x01},//crop window height
	{0x56,0xe0}, 
	{0x57,0x02},//crop window width
	{0x58,0x80}, 


	/////////////////////////////////////////////////  
	///////////////////   GAIN   ////////////////////
	/////////////////////////////////////////////////
	{0x70,0x70},
	{0x5a,0x84},
	{0x5b,0xc9},
	{0x5c,0xed},
	{0x77,0x74},
	{0x78,0x40},
	{0x79,0x5f}, 


	///////////////////////////////////////////////// 
	///////////////////   DNDD  /////////////////////
	///////////////////////////////////////////////// 
	{0x82,0x08},//0x14 
	{0x83,0x0b},
	{0x89,0xf0},
	///////////////////////////////////////////////// 
	//////////////////   EEINTP  ////////////////////
	///////////////////////////////////////////////// 
	{0x8f,0xaa},
	{0x90,0x8c},
	{0x91,0x90},
	{0x92,0x03},
	{0x93,0x03},
	{0x94,0x05},
	{0x95,0x43}, //0x65
	{0x96,0xf0}, 
	///////////////////////////////////////////////// 
	/////////////////////  ASDE  ////////////////////
	///////////////////////////////////////////////// 
	{0xfe,0x00},

	{0x9a, 0x20}, 
	{0x9b, 0x80}, 
	{0x9c, 0x40}, 
	{0x9d, 0x80}, 
	{0xa1, 0x30}, 
	{0xa2, 0x32}, 
	{0xa4, 0x80},//30 travis 20140929
	{0xa5, 0x28},//30 travis 20140929
	{0xaa, 0x30},//10 travis 20140929 				
	{0xac, 0x22}, 

	/////////////////////////////////////////////////
	///////////////////   GAMMA   ///////////////////
	/////////////////////////////////////////////////
	{0xfe, 0x00}, 
	{0xbf,0x08}, 
	{0xc0,0x16}, 
	{0xc1,0x28}, 
	{0xc2,0x41}, 
	{0xc3,0x5a}, 
	{0xc4,0x6c}, 
	{0xc5,0x7a}, 
	{0xc6,0x96}, 
	{0xc7,0xac}, 
	{0xc8,0xbc}, 
	{0xc9,0xc9}, 
	{0xca,0xd3}, 
	{0xcb,0xdd}, 
	{0xcc,0xe5}, 
	{0xcd,0xf1}, 
	{0xce,0xfa}, 
	{0xcf,0xff},
	/* 
	{0xfe,0x00},//big gamma
	{0xbf,0x08},
	{0xc0,0x1d},
	{0xc1,0x34},
	{0xc2,0x4b},
	{0xc3,0x60},
	{0xc4,0x73},
	{0xc5,0x85},
	{0xc6,0x9f},
	{0xc7,0xb5},
	{0xc8,0xc7},
	{0xc9,0xd5},
	{0xca,0xe0},
	{0xcb,0xe7},
	{0xcc,0xec},
	{0xcd,0xf4},
	{0xce,0xfa},
	{0xcf,0xff},
	*/	

	/*
	{0xfe,0x00},//small gamma
	{0xbf,0x08},
	{0xc0,0x18},
	{0xc1,0x2c},
	{0xc2,0x41},
	{0xc3,0x59},
	{0xc4,0x6e},
	{0xc5,0x81},
	{0xc6,0x9f},
	{0xc7,0xb5},
	{0xc8,0xc7},
	{0xc9,0xd5},
	{0xca,0xe0},
	{0xcb,0xe7},
	{0xcc,0xec},
	{0xcd,0xf4},
	{0xce,0xfa},
	{0xcf,0xff},
	*/
				/////////////////////////////////////////////////
	///////////////////   YCP  //////////////////////
	/////////////////////////////////////////////////
	{0xd0,0x40}, 
	{0xd1,0x38}, //0x34
	{0xd2,0x38}, //0x34
	{0xd3,0x50},//0x40 
	{0xd6,0xf2}, 
	{0xd7,0x1b}, 
	{0xd8,0x18}, 
	{0xdd,0x03}, 

	/////////////////////////////////////////////////
	////////////////////   AEC   ////////////////////
	/////////////////////////////////////////////////
	{0xfe,0x01},
	{0x05,0x30},
	{0x06,0x75},
	{0x07,0x40},
	{0x08,0xb0},
	{0x0a,0xc5},
	{0x0b,0x11},
	{0x0c,0x00},
	{0x12,0x52},
	{0x13,0x38},
	{0x18,0x95},
	{0x19,0x96},
	{0x1f, 0x20}, 
	{0x20, 0xc0}, 
	{0x3e,0x40}, 
	{0x3f,0x57}, 
	{0x40,0x7d}, 

	{0x03,0x60}, 

	{0x44, 0x02}, 
	/////////////////////////////////////////////////
	////////////////////   AWB   ////////////////////
	/////////////////////////////////////////////////
	{0xfe,0x01},
	{0x1c,0x91},
	{0x21,0x15},
	{0x50,0x80},
	{0x56,0x04},
	{0x59,0x08},
	{0x5b,0x02},
	{0x61,0x8d},
	{0x62,0xa7},
	{0x63,0xd0},
	{0x65,0x06},
	{0x66,0x06},
	{0x67,0x84},
	{0x69,0x08},
	{0x6a,0x25},
	{0x6b,0x01},
	{0x6c,0x00},
	{0x6d,0x02},
	{0x6e,0xf0},
	{0x6f,0x80},
	{0x76,0x80},
	{0x78,0xaf},


	{0x79,0x75},
	{0x7a,0x40},
	{0x7b,0x50},
	{0x7c,0x0c}, 

	{0x90,0xc9},//stable AWB 
	{0x91,0xbe},
	{0x92,0xe2},
	{0x93,0xc9},
	{0x95,0x1b},
	{0x96,0xe2},
	{0x97,0x49},
	{0x98,0x1b},
	{0x9a,0x49},
	{0x9b,0x1b},
	{0x9c,0xc3},
	{0x9d,0x49},
	{0x9f,0xc7},
	{0xa0,0xc8},
	{0xa1,0x00},
	{0xa2,0x00},
	{0x86,0x00},
	{0x87,0x00},
	{0x88,0x00},
	{0x89,0x00},
	{0xa4,0xb9},
	{0xa5,0xa0},
	{0xa6,0xba},
	{0xa7,0x92},
	{0xa9,0xba},
	{0xaa,0x80},
	{0xab,0x9d},
	{0xac,0x7f},
	{0xae,0xbb},
	{0xaf,0x9d},
	{0xb0,0xc8},
	{0xb1,0x97},
	{0xb3,0xb7},
	{0xb4,0x7f},
	{0xb5,0x00},
	{0xb6,0x00},
	{0x8b,0x00},
	{0x8c,0x00},
	{0x8d,0x00},
	{0x8e,0x00},
	{0x94,0x55},
	{0x99,0xa6},
	{0x9e,0xaa},
	{0xa3,0x0a},
	{0x8a,0x00},
	{0xa8,0x55},
	{0xad,0x55},
	{0xb2,0x55},
	{0xb7,0x05},
	{0x8f,0x00},
	{0xb8,0xcb},
	{0xb9,0x9b},  

	/*	 
	{0xa4,0xb9}, //default AWB
	{0xa5,0xa0},
	{0x90,0xc9}, 
	{0x91,0xbe},                                 
	{0xa6,0xb8}, 
	{0xa7,0x95}, 
	{0x92,0xe6}, 
	{0x93,0xca},                                
	{0xa9,0xbc}, 
	{0xaa,0x95}, 
	{0x95,0x23}, 
	{0x96,0xe7},                                  
	{0xab,0x9d}, 
	{0xac,0x80},
	{0x97,0x43}, 
	{0x98,0x24},                                
	{0xae,0xb7}, 
	{0xaf,0x9e}, 
	{0x9a,0x43},
	{0x9b,0x24},                                 
	{0xb0,0xc8}, 
	{0xb1,0x97},
	{0x9c,0xc4}, 
	{0x9d,0x44},                               
	{0xb3,0xb7}, 
	{0xb4,0x7f},
	{0x9f,0xc7},
	{0xa0,0xc8},                               
	{0xb5,0x00}, 
	{0xb6,0x00},
	{0xa1,0x00},
	{0xa2,0x00},                         
	{0x86,0x60},
	{0x87,0x08},
	{0x88,0x00},
	{0x89,0x00},
	{0x8b,0xde},
	{0x8c,0x80},
	{0x8d,0x00},
	{0x8e,0x00},                               
	{0x94,0x55},
	{0x99,0xa6},
	{0x9e,0xaa},
	{0xa3,0x0a},
	{0x8a,0x0a},
	{0xa8,0x55},
	{0xad,0x55},
	{0xb2,0x55},
	{0xb7,0x05},
	{0x8f,0x05},                              
	{0xb8,0xcc},
	{0xb9,0x9a},
	*/  

	/////////////////////////////////////////////////
	////////////////////   CC    ////////////////////
	/////////////////////////////////////////////////
	{0xfe,0x01},

				//red skin
	{0xd0, 0x38}, //red
	{0xd1, 0x00}, 
	{0xd2, 0x02}, 
	{0xd3, 0x04}, 
	{0xd4, 0x38}, 
	{0xd5, 0x12}, 

	{0xd6,0x30},
	{0xd7,0x00},
	{0xd8,0x0a},
	{0xd9,0x16},
	{0xda,0x39},
	{0xdb,0xf8},
	/////////////////////////////////////////////////
	////////////////////   LSC   ////////////////////
	/////////////////////////////////////////////////
	{0xfe,0x01}, 
	{0xc1,0x3c},
	{0xc2,0x50},
	{0xc3,0x00},
	{0xc4,0x40},
	{0xc5,0x30},
	{0xc6,0x30},
	{0xc7,0x10},
	{0xc8,0x00},
	{0xc9,0x00},
	{0xdc,0x20},
	{0xdd,0x10},
	{0xdf,0x00}, 
	{0xde,0x00}, 


	/////////////////////////////////////////////////
	///////////////////  Histogram  /////////////////
	/////////////////////////////////////////////////
	{0x01,0x10}, 
	{0x0b, 0x31}, //11
	{0x0e,0x50}, 
	{0x0f,0x0f}, 
	{0x10,0x6e}, 
	{0x12,0xa0}, 
	{0x15,0x60}, 
	{0x16,0x60}, 
	{0x17,0xe0}, 


	/////////////////////////////////////////////////
	//////////////   Measure Window   ///////////////
	/////////////////////////////////////////////////
	{0xcc,0x0c},//aec window size 
	{0xcd,0x10}, 
	{0xce,0xa0}, 
	{0xcf,0xe6}, 


	/////////////////////////////////////////////////
	/////////////////   dark sun   //////////////////
	/////////////////////////////////////////////////
	{0x45,0xf7},
	{0x46,0xff}, //f0//sun vaule th
	{0x47,0x15},
	{0x48,0x03}, //sun mode
	{0x4f,0x60}, //sun_clamp

	{0xfe,0x00},
	{0x05, 0x01}, 
	{0x06, 0x89}, //HB
	{0x07, 0x00}, 
	{0x08, 0x2a}, //VB
	{0xfe, 0x01}, 
	{0x25, 0x00}, //step
	{0x26, 0x6d}, 
	{0x27, 0x01}, //20.2fps
	{0x28, 0xb4}, 
	{0x29, 0x02}, //16.6fps
	{0x2a, 0x8e}, 
	{0x2b, 0x02}, //14.3fps
	{0x2c, 0xfb}, 
	{0x2d, 0x07}, //5.5fps
	{0x2e, 0x3d}, 

	{0x3c,0x20},
	/////////////////////  SPI   ////////////////////
	/////////////////////////////////////////////////
#ifdef VGA_SUPPORT
	{0x50,0x01},	// Crop en
	{0x51,0x00},
	{0x52,0x00},
	{0x53,0x00},
	{0x54,0x00},
	{0x55,0x01},
	{0x56,0xe0},
	{0x57,0x02},
	{0x58,0x80},
		
	{0xfe,0x03},
	{0x01,0x00},
	{0x02,0x00},
	{0x10,0x00},
	{0x15,0x00},
	{0x17,0x00}, //01//03
	{0x04,0x10},
	{0x05,0x00},
	{0x40,0x00},


	{0x52,0xa0}, //a2 //a0//80//00 //22

	{0x53,0x24}, //24
	{0x54,0x20},
	{0x55,0x20}, //QQ//01
	{0x5a,0x00}, //00 //yuv 
	{0x5b,0x80},
	{0x5c,0x02},
	{0x5d,0xe0},
	{0x5e,0x01},
	{0x51,0x03},
	{0x64,0x06},
	{0xfe,0x00},

#else
	{0x50,0x01},	// Crop en
	{0x51,0x00},
	{0x52,0x78},
	{0x53,0x00},
	{0x54,0xa0},
	{0x55,0x00},
	{0x56,0xf0},
	{0x57,0x01},
	{0x58,0x40},
		
	{0xfe,0x03},
	{0x01,0x00},
	{0x02,0x00},
	{0x10,0x00},
	{0x15,0x00},
	{0x17,0x00}, //01//03
	{0x04,0x10},
	{0x05,0x00},
	{0x40,0x00},


	{0x52,0xa0}, //a2 //a0//80//00 //22

	{0x53,0x24}, //24
	{0x54,0x20},
	{0x55,0x20}, //QQ//01
	{0x5a,0x00}, //00 //yuv 
	{0x51,0x03},
	{0x64,0x06},
	{0xfe,0x00},

#endif
};;
#endif

//#define ZBAR_WRITEREG
#ifdef ZBAR_WRITEREG

static AMOPENAT_CAMERA_REG cameraMirrorEnReg[] =
{
	{0x17, 0x15}
};

static AMOPENAT_CAMERA_REG cameraMirrorDisReg[] =
{
	{0x17, 0x14}
};

/*测试iot_camera_WriteReg接口*/
static void camera_writeReg(void)
{
#ifndef AM_CAM_BF20A6
	static int regTurn = 0;

	regTurn = 1 - regTurn;
	
	iot_debug_print("zwb camera_writeRegCb regTurn %d", regTurn);
	
	if (regTurn)
		iot_camera_WriteReg(cameraMirrorEnReg, sizeof(cameraMirrorEnReg)/sizeof(AMOPENAT_CAMERA_REG));
	else
		iot_camera_WriteReg(cameraMirrorDisReg, sizeof(cameraMirrorDisReg)/sizeof(AMOPENAT_CAMERA_REG));
#endif
}
#endif

BOOL cameraInit(PCAMERA_MESSAGE cb)
{
	BOOL ret;
	T_AMOPENAT_CAM_PREVIEW_PARAM previewParam;
	T_AMOPENAT_CAMERA_PARAM initParam =
	{
		cb,
		OPENAT_I2C_1, 
		CAM_SPI_SLAVE_ADDR,
		AMOPENAT_CAMERA_REG_ADDR_8BITS|AMOPENAT_CAMERA_REG_DATA_8BITS,

		TRUE,
		TRUE,
		TRUE, 

		CAM_SENSOR_WIDTH,
		CAM_SENSOR_HEIGHT,
		CAMERA_IMAGE_FORMAT_YUV422,
		cameraInitReg,
        sizeof(cameraInitReg)/sizeof(AMOPENAT_CAMERA_REG),
		{CAM_ID_REG, CAM_ID_VALUE},
		{2,3,TRUE},
		1,
		OPENAT_SPI_MODE_MASTER2_2,
		OPENAT_SPI_OUT_Y1_V0_Y0_U0,
		FALSE,
		CAM_SPI_SPEED
	};
	ret = iot_camera_init(&initParam);
	if (!ret)
		return FALSE;
	
	ret = iot_camera_poweron(FALSE);
	if (!ret)
		return FALSE;

	previewParam.startX = 0;
	previewParam.startY = 0;
	
	/*++/测试写lcd放缩显示和反转显示功能，需要可以打开宏*/
#ifdef ZBAR_ZOOM_ROTATION
	/*放缩显示4倍*/
	previewParam.zoom = -2;
	/* 反转90度*/
	previewParam.rotation = 90;

	/*显示的区域也需要按照2倍放缩，反转90读，切换宽高*/
	previewParam.endX = CAM_SENSOR_HEIGHT/2;
	previewParam.endY = CAM_SENSOR_WIDTH/2;
#else
	previewParam.zoom = 0;
	previewParam.rotation = 0;
	previewParam.endX = CAM_DISP_WIDTH;
	previewParam.endY = CAM_DISP_HEIGHT;
#endif
	/*--/测试写lcd放缩显示和反转显示功能，需要可以打开宏*/
	
	ret = iot_camera_preview_open(&previewParam);
	if (!ret)
		return FALSE;

	iot_debug_print("zwb camera_writeReg test");

	/*++/测试写camera寄存器接口,设置CAM镜像功能,需要时可以打开宏*/

#ifdef ZBAR_WRITEREG
	while(1)
	{	
		iot_os_sleep(3000);
		
		camera_writeReg();
		iot_os_sleep(3000);
	}
#endif
	/*--/测试写camera寄存器接口,设置CAM镜像功能,需要时可以打开宏*/
	return TRUE;
}

